<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Palíndromos</title>
</head>

<body>
    <h1>Procesador de Palíndromos</h1>
    <form id="uploadForm">
        <label>
            <input type="radio" name="problema" value="1" checked> Problema 1
        </label>
        <label>
            <input type="radio" name="problema" value="2"> Problema 2
        </label>

        <input type="file" name="archivo" id="archivo" required>
        <button type="submit">Procesar</button>
    </form>

    <h2>Resultado:</h2>
    <pre id="resultado"></pre>

    <script>
        const form = document.getElementById('uploadForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(form);

            try {
                const res = await fetch('/upload', {
                    method: 'POST',
                    body: formData
                });

                const data = await res.json();

                if (res.ok && Array.isArray(data.resultado)) {
                    document.getElementById('resultado').innerText = data.resultado.join('\n');
                } else if (data.resultado) {
                    // Por si resultado es string (ej: del problema 2)
                    document.getElementById('resultado').innerText = data.resultado;
                } else if (data.error) {
                    document.getElementById('resultado').innerText = "❌ Error: " + data.error;
                } else {
                    document.getElementById('resultado').innerText = "❌ Error inesperado.";
                }
            } catch (err) {
                document.getElementById('resultado').innerText = "❌ Error de red o servidor: " + err.message;
            }
        });
    </script>

</body>

</html>