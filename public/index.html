<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Procesador de Archivos</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="container">
      <h1>Procesador de Archivos</h1>
      <form id="uploadForm">
        <h3>Problema 1 (Pal√≠ndromos)</h3>
        <label>
          <input type="radio" name="problema" value="1" checked /> Pal√≠ndromos - Soluci√≥n Din√°mica
        </label>
        <label>
          <input type="radio" name="problema" value="2" /> Pal√≠ndromos - Soluci√≥n Voraz
        </label>
        <label>
          <input type="radio" name="problema" value="3" /> Pal√≠ndromos - Soluci√≥n de Fuerza Bruta
        </label>

        <h3>Problema 2 (Fiesta)</h3>
        <label>
          <input type="radio" name="problema" value="4" /> Permutaciones - Soluci√≥n Din√°mica
        </label>
        <label>
          <input type="radio" name="problema" value="5" /> Permutaciones - Soluci√≥n Voraz
        </label>
        <label>
          <input type="radio" name="problema" value="6" /> Permutaciones - Soluci√≥n de Fuerza Bruta
        </label>

        <label for="archivo">Selecciona uno o m√°s archivos:</label>
        <input type="file" name="archivos" id="archivo" multiple required /><br />

        <button type="submit">Procesar</button>
      </form>

      <h3>Resultado:</h3>
      <pre id="resultado">Esperando archivos...</pre>
    </div>

    <script>
      const form = document.getElementById('uploadForm');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData(form);

        try {
          const res = await fetch('/upload', {
            method: 'POST',
            body: formData,
          });

          const data = await res.json();
          const resultadoElement = document.getElementById('resultado');

          if (res.ok && Array.isArray(data.resultado)) {
            resultadoElement.innerText = '';
            data.resultado.forEach((item) => {
              resultadoElement.innerText += `üìÑ Archivo: ${item.archivo}\n`;
              resultadoElement.innerText += `‚úÖ Resultado:\n${item.resultado.join('\n')}\n\n`;
            });
          } else if (data.error) {
            resultadoElement.innerText = '‚ùå Error: ' + data.error;
          } else {
            resultadoElement.innerText = '‚ùå Error inesperado.';
          }
        } catch (err) {
          document.getElementById('resultado').innerText = '‚ùå Error de red: ' + err.message;
        }
      });
    </script>
  </body>
</html>
